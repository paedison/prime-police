<article class="table-responsive">
    <table class="table align-middle m-0">
        <thead>
            <tr>
                <th class="text-center text-nowrap px-2">제목</th>
                <th class="text-center text-nowrap px-0 col-1">글쓴이</th>
                <th class="text-nowrap px-2 col-1">
                    <div class="td-div-md" aria-label="Date">작성일</div>
                    <div class="td-div-sm" aria-label="Hits">조회</div>
                    <div class="td-div-sm" aria-label="Comment">댓글</div>
                </th>
            </tr>
        </thead>
        <tbody>
            {% if top_fixed %}
                {% for post in top_fixed %}{% partial tbody %}{% endfor %}
            {% endif %}
            {% if page_obj %}
                {% for post in page_obj %}
                    {% if not post.top_fixed %}{% partial tbody %}{% endif %}
                {% endfor %}
            {% else %}
                <tr>
                    <td class="text-center text-nowrap px-2" colspan="5">
                        추가된 자료가 없습니다.
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</article>

<section class="d-flex flex-wrap">
    {% if page_obj.has_next or page_obj.has_previous %}
        {% include 'a_notice/snippets/pagination.html' with header='notice_list' %}
    {% endif %}

    {% if user.is_admin or user.is_staff %}
        <div class="p-2">
            <a class="btn btn-sm btn-outline-primary" hx-boost="true"
               hx-get="{{ post_create_url }}" href=""
               hx-push-url="true" title="Create">
                글쓰기
            </a>
        </div>
    {% endif %}
</section>

{% partialdef tbody %}
    <tr{% if post.top_fixed %} class="table-warning"{% endif %}>
        <td class="text-start text-nowrap fw-bold px-2">
            <span class="badge rounded-pill bg-secondary">{{ post.get_category_display }}</span>
            {% if post.top_fixed %}
                <span class="text-danger">{{ board_icon.top_fixed|safe }}</span>
            {% endif %}
            {% if post.is_hidden %}
                <span class="text-danger">{{ board_icon.is_hidden|safe }}</span>
            {% endif %}
            <a class="text-decoration-none d-md-none"
               hx-get="{{ post.get_absolute_url }}" href=""
               hx-push-url="{{ post.get_absolute_url }}" title="{{ post.title }}">
                {{ post.title|truncatechars:30 }}
            </a>
            <a class="text-decoration-none d-none d-md-inline d-lg-none"
               hx-get="{{ post.get_absolute_url }}" href=""
               hx-push-url="{{ post.get_absolute_url }}" title="{{ post.title }}">
                {{ post.title|truncatechars:40 }}
            </a>
            <a class="text-decoration-none d-none d-lg-inline"
               hx-get="{{ post.get_absolute_url }}" href=""
               hx-push-url="{{ post.get_absolute_url }}" title="{{ post.title }}">
                {{ post.title|truncatechars:50 }}
            </a>
        </td>
        <td class="text-center text-nowrap px-0 col-1">{{ post.user.username }}</td>
        <td class="text-nowrap px-2 col-1">
            <div class="td-div-md" aria-label="Date">{{ post.created_at|date:'n/j' }}</div>
            <div class="td-div-sm" aria-label="Hit">{{ post.hit }}</div>
            <div class="td-div-sm" aria-label="Comment">{{ post.comment_count }}</div>
        </td>
    </tr>
{% endpartialdef tbody %}
