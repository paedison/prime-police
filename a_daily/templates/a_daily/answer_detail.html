{% extends '_base.html' %}

{% block head_title %}{{ sub_title }}{% endblock %}

{% block main %}
    {{ info|json_script:'info' }}
    <div class="pagetitle">
        <h1>
            {{ icon_menu|safe }} {{ title }}
            {% if user.is_staff %}
                <a class="btn btn-sm btn-outline-primary ms-1"
                   href="{% url 'admin:a_daily_student_changelist' %}" target="admin">
                    관리자 페이지
                </a>
            {% endif %}
        </h1>
        <nav>
            <ol class="breadcrumb" hx-target="#main" hx-swap="innerHTML swap:0.25s" hx-boost="true">
                <li class="breadcrumb-item">
                    <a href="{% url 'index' %}">Home</a>
                </li>
                <li class="breadcrumb-item">Daily</li>
                <li class="breadcrumb-item">
                    <a class="active" href="{% url 'daily:answer-list' %}">Answer</a>
                </li>
                <li class="breadcrumb-item">
                    <a class="active" href="{% url 'daily:answer-detail' student.pk %}">{{ exam.circle_subject_round }}</a>
                </li>
            </ol>
        </nav>
    </div><!-- Page Title End -->

    <section class="section htmx-fade-in htmx-fade-out"
             hx-target="#main" hx-swap="innerHTML swap:0.25s show:window:top">
        <div class="row">
            <div class="col-12" aria-label="성적 확인">
                <div class="card">
                    <div class="card-header">{{ sub_title|safe }}</div>

                    <div class="card-body">
                        {% partial detail_content %}
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="section htmx-fade-in htmx-fade-out" hx-target="#main" hx-swap="innerHTML swap:0.25s">
        <div class="row">
{#            <div class="col-12">#}
{#                <div class="card">#}
{#                    <div class="card-body">#}
{#                        <h5 class="card-title mb-0 text-center">#}
{#                            <div class="d-flex">#}
{#                                <div class="btn-group ms-auto">#}
{#                                    <a class="btn btn-sm btn-outline-secondary" title="{% trans 'List' %}"#}
{#                                       href="{{ student_vars.url_list }}" hx-boost="true">#}
{#                                        목록#}
{#                                    </a>#}
{#                                    <a class="btn btn-sm btn-outline-secondary" title="{% trans 'Print' %}"#}
{#                                       href="" target="score_print">#}
{#                                        인쇄하기#}
{#                                    </a>#}
{#                                </div>#}
{#                            </div>#}
{#                            <img src="{% static 'image/prime/2024/student/title.jpg' %}" class="mw-100" alt="Title"/>#}
{#                            <div class="fs-1 fw-bolder">제 {{ student_vars.student_round }} 회 성적표</div>#}
{#                            {% if not student %}#}
{#                                <div class="container p-0">#}
{#                                    <div class="container">#}
{#                                        <img src="{% static 'image/prime/2024/student/message-1.jpg' %}" class="mw-100" alt="Message"/>#}
{#                                        <img src="{% static 'image/prime/2024/student/message-2.jpg' %}" class="mw-100" alt="Message"/>#}
{#                                    </div>#}
{#                                </div>#}
{#                            {% endif %}#}
{#                        </h5>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{##}
{#            <div class="col-12">#}
{#                <div id="score_sheet" class="card htmx-fade-in htmx-fade-out">#}
{#                    {% include 'a_score/snippets/detail_sheet_score.html' with is_confirmed=True %}#}
{#                </div>#}
{#            </div>#}
{##}
{#            <div class="col-12">#}
{#                <div id="chart" class="card htmx-fade-in htmx-fade-out">#}
{#                    {% include 'a_score/snippets/detail_chart.html' with is_confirmed=True %}#}
{#                </div>#}
{#            </div>#}
{##}
{#            <div class="col-12">#}
{#                <div id="answer_student" class="card htmx-fade-in htmx-fade-out">#}
{#                    {% include 'a_score/snippets/detail_sheet_answer.html' %}#}
{#                </div>#}
{#            </div>#}
        </div>
    </section>
{% endblock main %}

{% partialdef detail_content %}
    <article class="table-responsive">
        <table class="table align-middle m-0">
            <thead>
                <tr class="d-none d-md-table-row text-center align-middle table-warning">
                    <th class="col-1">응시생수(명)</th>
                    <th class="col-1">점수(점)</th>
                    <th class="col-1">석차(등)</th>
                    <th class="col-1">석차(%)</th>
                    <th class="col-1">최고 점수(점)</th>
                    <th class="col-1">상위 10%(점)</th>
                    <th class="col-1">상위 20%(점)</th>
                    <th class="col-1">평균 점수(점)</th>
                </tr>
            </thead>

            <tbody>
                <tr class="text-center">
                    <td class="text-nowrap p-2">{{ exam.participants }}</td>
                    <td class="text-nowrap p-2">{{ student.score }}</td>
                    <td class="text-nowrap p-2">{{ student.rank }}</td>
                    <td class="text-nowrap p-2">{{ student.rank_ratio|default:0 }}</td>
                    <td class="text-nowrap p-2">{{ exam.statistics.max }}</td>
                    <td class="text-nowrap p-2">{{ exam.statistics.t10 }}</td>
                    <td class="text-nowrap p-2">{{ exam.statistics.t20 }}</td>
                    <td class="text-nowrap p-2">{{ exam.statistics.avg }}</td>
                </tr>
            </tbody>
        </table>
    </article>
{% endpartialdef detail_content %}
